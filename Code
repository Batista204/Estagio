// Use DBML to define your database structure
// Docs: https://dbml.dbdiagram.io/docs

Table usuario {
  id int [primary key, increment]
  nome varchar [not null]
  data_nascimento date
  email varchar unique [not null]
  senha varchar [not null]
  cpf char(14) unique
  cnpj char(9) unique
  telefone varchar
  endereço varchar
  username varchar
  status boolean [default: 1] 
  ultimo_acesso Datatime 
  created_at timestamp
  update_at timestamp
}

Table Cliente {
  id int [primary key, increment]
  usuario_id int
  nome varchar [not null]
  email varchar unique
  telefone varchar
  cpf char(14) unique
  cnpj char(14) unique
  endereço varchar
  cidade varchar
  estado char(2)
  cep char(9)
  data_nascimento date [not null]
  genero char(1) [not null]
  credito varchar
  username varchar
  status boolean [default: 1]
  observacoes text
  tipo_cliente ENUM('PF','PJ')
  papel varchar
  cartao_id int
  created_at timestamp
  update_at timestamp
}

Table controle_contatos {
  id aut [primary key, increment]
  usuario_id int
  cliente_id int [not null]
  data_contato datetime [not null]
  forma_contato varchar
  tema varchar
  descricao text
  proximo_contato datatime
  status varchar
  responsavel_contato varchar
  created_at timestamp
  update_at timestamp
}

Table receitas {
  id int [primary key, increment]
  cliente_id int [not null]
  fornecedor_id int
  valor varchar [not null]
  descricao varchar
  data_receita date [not null]
  pagamento varchar [not null]
  status varchar [not null]
  created_at timestamp
  update_at timestamp
  foreign key
}

Table despesas {
  id int [primary key, increment]
  fornecedor_id int
  valor varchar [not null]
  descriacao varchar
  data_despesa date
  forma_pagamento varchar
  status varchar
  created_at timestamp
  updated_at timestamp
}

Table fornecedor {
  in int [primary key, increment]
  nome varcahar [not null]
  cnpj varchar unique [not null]
  email varcher unique
  telefone varchar
  fornecedor_id int
  endereco varchar
  cidade varchar
  estado char(2)
  cep char(9)
  status varchar [not null]
  created_at timestamp
  updated_at timestamp
}

Table controle_de_banco {
  id int [primary key, increment]
  usuario_id int
  conta_id int
  nome_banco varchar [not null]
  agencia varchar [not null]
  conta varchar unique 
  saldo varchar 
  tipo_de_conta varchar [not null]
  bandeira_cartao varchar [not null]
  cartao_id int
  created_at timestamp
  updated_at timestamp
}

Table controle_cartao {
  id int [primary key, increment]
  numero_cartao char(16) unique [not null]
  titular varchar [not null]
  validade date [not null]
  cvc char(3) [not null]
  limite varchar 
  created_at timestamp
  updated_at timestamp
}

Table controle_conta {
  id int [primary key, increment]
  usarneme varchar [not null]
  vencimentos date [not null]
  status varchar [not null]
  descricao text
  created_at timestamp
  updated_at timestamp
}

Table controle_pagamento {
  id int [primary key, increment]
  usuario_id int
  conta_id int [not null]
  valor_pago varchar [not null]
  data_pagamento date [not null]
  forma_pagamento varchar
  status varchar [not null]
  observacao text
  created_at timestamp
  updated_at timestamp
}

Ref: "usuario"."id" < "Cliente"."usuario_id"

Ref: "usuario"."id" < "controle_contatos"."usuario_id"

Ref: "usuario"."id" < "controle_de_banco"."usuario_id"

Ref: "usuario"."id" < "controle_pagamento"."usuario_id"

Ref: "Cliente"."id" < "controle_contatos"."cliente_id"

Ref: "Cliente"."id" < "receitas"."cliente_id"

Ref: "fornecedor"."in" < "despesas"."fornecedor_id"

Ref: "controle_pagamento"."conta_id" < "controle_conta"."id"

Ref: "Cliente"."cartao_id" < "controle_cartao"."id"

Ref: "controle_de_banco"."cartao_id" < "controle_cartao"."id"

Ref: "controle_conta"."id" < "controle_de_banco"."id"

Ref: "fornecedor"."in" < "receitas"."fornecedor_id"
